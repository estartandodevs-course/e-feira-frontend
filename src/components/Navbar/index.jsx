import * as React from 'react';
import BottomNavigation from '@mui/material/BottomNavigation';
import BottomNavigationAction from '@mui/material/BottomNavigationAction';
import Badge from '@mui/material/Badge';
import { createSvgIcon } from '@mui/material/utils';
import { ContainerStyle } from './styles';
import { NavLink } from 'react-router-dom';
import { useCart } from '../../contexts/CartContext';

export default function Navbar() {
  const HomeIcon = createSvgIcon(
    <path d="M 0,24 V 7.9999858 L 12.037779,0 24,7.9999858 V 24 H 15.150063 V 14.566412 H 8.8121325 V 24 Z M 2.5119634,21.766403 H 6.337066 V 12.333615 H 17.66293 v 9.432788 h 3.825103 V 9.1000196 L 12.037779,2.7663928 2.5119634,9.1000196 Z" />,
    'Home'
  );

  const SearchIcon = createSvgIcon(
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />,
    'Search'
  );

  const ShoppingCartIcon = createSvgIcon(
    <path d="M 4.4277672,24 C 4.1212709,24 3.8418229,23.889744 3.5894158,23.669082 3.3370005,23.447588 3.1657251,23.157883 3.0755804,22.800061 L 0.04669063,10.042122 c -0.090144,-0.2947244 -0.04976,-0.5684204 0.121156,-0.8210852 0.1716384,-0.2526048 0.4016852,-0.3789264 0.6901551,-0.3789264 H 6.3208215 L 11.080527,0.5684214 C 11.170657,0.40000008 11.296823,0.26315748 11.459086,0.15789408 11.621347,0.05263128 11.792696,0 11.97297,0 c 0.18027,0 0.35154,0.0526308 0.513802,0.15789408 0.162261,0.105264 0.288502,0.242106 0.378638,0.41052732 l 4.759632,8.273689 h 5.516911 c 0.288503,0 0.518587,0.1263216 0.690179,0.3789264 0.170945,0.2526648 0.211349,0.5263608 0.121132,0.8210852 l -3.028865,12.757939 c -0.09013,0.357822 -0.261404,0.647527 -0.513803,0.869021 C 20.158196,23.889725 19.8787,24 19.572188,24 Z M 4.9686434,21.473744 H 19.031368 L 21.411186,11.36844 H 2.588794 Z m 7.0313426,-2.526351 c 0.594934,0 1.104437,-0.247167 1.528508,-0.741504 0.423339,-0.495095 0.635011,-1.090044 0.635011,-1.784845 0,-0.694704 -0.211672,-1.289652 -0.635011,-1.784843 -0.424071,-0.494337 -0.933574,-0.741412 -1.528508,-0.741412 -0.594935,0 -1.104113,0.247075 -1.527457,0.741412 -0.423989,0.495191 -0.6360645,1.090139 -0.6360645,1.784843 0,0.694801 0.2120755,1.28975 0.6360645,1.784845 0.423344,0.494337 0.932522,0.741504 1.527457,0.741504 z M 8.9440225,8.8421104 H 15.028851 L 11.97297,3.5368421 Z" />,
    'ShoppingCart'
  );

  const PersonIcon = createSvgIcon(
    <path d="M11.4999 10.8328C10.0333 10.8328 8.7777 10.3106 7.73325 9.26614C6.68881 8.22169 6.16659 6.96614 6.16659 5.49947C6.16659 4.0328 6.68881 2.77725 7.73325 1.7328C8.7777 0.68836 10.0333 0.166138 11.4999 0.166138C12.9666 0.166138 14.2221 0.68836 15.2666 1.7328C16.311 2.77725 16.8333 4.0328 16.8333 5.49947C16.8333 6.96614 16.311 8.22169 15.2666 9.26614C14.2221 10.3106 12.9666 10.8328 11.4999 10.8328ZM0.833252 21.4995V17.7661C0.833252 17.0106 1.02792 16.3159 1.41725 15.6821C1.8057 15.0492 2.32214 14.5661 2.96659 14.2328C4.34436 13.5439 5.74436 13.027 7.16659 12.6821C8.58881 12.3381 10.0333 12.1661 11.4999 12.1661C12.9666 12.1661 14.411 12.3381 15.8333 12.6821C17.2555 13.027 18.6555 13.5439 20.0333 14.2328C20.6777 14.5661 21.1941 15.0492 21.5826 15.6821C21.9719 16.3159 22.1666 17.0106 22.1666 17.7661V21.4995H0.833252ZM3.49992 18.8328H19.4999V17.7661C19.4999 17.5217 19.439 17.2995 19.3173 17.0995C19.1946 16.8995 19.0333 16.7439 18.8333 16.6328C17.6333 16.0328 16.4221 15.5826 15.1999 15.2821C13.9777 14.9826 12.7444 14.8328 11.4999 14.8328C10.2555 14.8328 9.02214 14.9826 7.79992 15.2821C6.5777 15.5826 5.36659 16.0328 4.16659 16.6328C3.96659 16.7439 3.8057 16.8995 3.68392 17.0995C3.56125 17.2995 3.49992 17.5217 3.49992 17.7661V18.8328ZM11.4999 8.16614C12.2333 8.16614 12.8613 7.9048 13.3839 7.38214C13.9057 6.86036 14.1666 6.2328 14.1666 5.49947C14.1666 4.76614 13.9057 4.13858 13.3839 3.6168C12.8613 3.09414 12.2333 2.8328 11.4999 2.8328C10.7666 2.8328 10.139 3.09414 9.61725 3.6168C9.09459 4.13858 8.83325 4.76614 8.83325 5.49947C8.83325 6.2328 9.09459 6.86036 9.61725 7.38214C10.139 7.9048 10.7666 8.16614 11.4999 8.16614Z" />,
    'Person'
  );

  const [value, setValue] = React.useState('home');

  const handleChange = (event, newValue) => {
    setValue(newValue);
  };

  const { cart } = useCart();

  let totalItems = cart.map(a => a.amount);

  return (
    <>
      <ContainerStyle>
        <BottomNavigation sx={{ width: '100%' }} value={value} onChange={handleChange}>
          <BottomNavigationAction
            value="home"
            icon={
              <NavLink to="/">
                <HomeIcon fontSize="large" />
              </NavLink>
            }
          />
          <BottomNavigationAction
            value="search"
            icon={
              <NavLink to="/buscar">
                <SearchIcon fontSize="large" />
              </NavLink>
            }
          />
          <BottomNavigationAction
            value="cart"
            icon={
              <NavLink to="/carrinho">
                <Badge badgeContent={totalItems.length} color="primary" fontSize="large">
                  <ShoppingCartIcon fontSize="large" />
                </Badge>
              </NavLink>
            }
          />
          <BottomNavigationAction value="account" icon={<PersonIcon fontSize="large" />} />
        </BottomNavigation>
      </ContainerStyle>
    </>
  );
}
